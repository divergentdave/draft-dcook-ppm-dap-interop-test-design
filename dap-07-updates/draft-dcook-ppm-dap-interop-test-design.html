<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>DAP Interoperation Test Design</title>
<meta content="David Cook" name="author">
<meta content="
       This document defines a common test interface for implementations of the
Distributed Aggregation Protocol for Privacy Preserving Measurement (DAP) and
describes how this test interface can be used to perform interoperation testing
between the implementations. Tests are orchestrated with containers, and new
test-only APIs are introduced to provision DAP tasks and initiate processing. 
    " name="description">
<meta content="xml2rfc 3.18.0" name="generator">
<meta content="draft-dcook-ppm-dap-interop-test-design-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.18.0
    Python 3.11.5
    ConfigArgParse 1.5.3
    google-i18n-address 3.1.0
    intervaltree 3.1.0
    Jinja2 3.1.2
    lxml 4.9.3
    platformdirs 3.10.0
    pycountry 22.3.5
    PyYAML 6.0
    requests 2.31.0
    setuptools 67.7.2
    six 1.16.0
    wcwidth 0.2.6
-->
<link href="draft-dcook-ppm-dap-interop-test-design.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}

@font-face {
  font-family: 'Lora';
  font-style: italic;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Italic'), local('Lora-Italic'), url('https://martinthomson.github.io/rfc-css/fonts/lora-italic-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Lora Regular'), local('Lora-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/lora-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic-ext.woff2') format('woff2');
  unicode-range: U+0460-052F, U+1C80-1C88, U+20B4, U+2DE0-2DFF, U+A640-A69F, U+FE2E-FE2F;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-cyrillic.woff2') format('woff2');
  unicode-range: U+0400-045F, U+0490-0491, U+04B0-04B1, U+2116;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 700;
  font-display: swap;
  src: local('Lora Bold'), local('Lora-Bold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-bold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}
@font-face {
  font-family: 'Lora';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Lora SemiBold'), local('Lora-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/lora-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-vietnamese.woff2') format('woff2');
  unicode-range: U+0102-0103, U+0110-0111, U+1EA0-1EF9, U+20AB;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Cabin Condensed';
  font-style: normal;
  font-weight: 600;
  font-display: swap;
  src: local('Cabin Condensed SemiBold'), local('CabinCondensed-SemiBold'), url('https://martinthomson.github.io/rfc-css/fonts/cabincondensed-semibold-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin-ext.woff2') format('woff2');
  unicode-range: U+0100-024F, U+0259, U+1E00-1EFF, U+2020, U+20A0-20AB, U+20AD-20CF, U+2113, U+2C60-2C7F, U+A720-A7FF;
}
@font-face {
  font-family: 'Oxygen Mono';
  font-style: normal;
  font-weight: 400;
  font-display: swap;
  src: local('Oxygen Mono'), local('OxygenMono-Regular'), url('https://martinthomson.github.io/rfc-css/fonts/oxygenmono-regular-latin.woff2') format('woff2');
  unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
}

:root {
  color-scheme: light dark;
  --background-color: #fff;
  --text-color: #222;
  --title-color: #191919;
  --link-color: #2a6496;
  --highlight-color: #f9f9f9;
  --line-color: #eee;
  --pilcrow-weak: #ddd;
  --pilcrow-strong: #bbb;
  --small-font-size: 14.5px;
  --font-mono: 'Oxygen Mono', monospace;
  scrollbar-color: #bbb #eee;
}
body {
  max-width: 600px;
  margin: 75px auto;
  padding: 0 5px;
  color: var(--text-color);
  background-color: var(--background-color);
  font: 16px/22px "Lora", serif;
  scroll-behavior: smooth;
}

.ears {
  display: none;
}

/* headings */
h1, h2, h3, h4, h5, h6 {
  font-family: "Cabin Condensed", sans-serif;
  font-weight: 600;
  margin: 0.8em 0 0.3em;
  font-size-adjust: 0.5;
  color: var(--title-color);
}
h1#title {
  font-size: 32px;
  line-height: 40px;
  clear: both;
}
h1#title, h1#rfcnum {
  margin: 1.5em 0 0.2em;
}
h1#rfcnum + h1#title {
  margin: 0.2em 0;
}

h1, h2, h3 {
  font-size: 22px;
  line-height: 27px;
}
h4, h5, h6 {
  font-size: 20px;
  line-height: 24px;
}

/* general structure */
.author {
  padding-bottom: 0.3em;
}
#abstract+p {
  font-size: 18px;
  line-height: 24px;
}
#abstract+p code, #abstract+p samp, #abstract+p tt {
  font-size: 16px;
  line-height: 0;
}

p {
  padding: 0;
  margin: 0.5em 0;
  text-align: left;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignRight.art-text pre {
  padding: 0;
  width: auto;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
/* font-family isn't space-separated, but =~ will have to do */
svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
  font-family: var(--font-mono);
}
.alignCenter.art-text {
  background-color: var(--highlight-color);
  border: 1px solid var(--line-color);
  border-radius: 3px;
  padding: 0.5em 1em 0;
  margin-bottom: 0.5em;
}
.alignCenter.art-text pre {
  padding: 0;
  width: auto;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 0.5em 2em;
}
:is(ol, ul) :is(ol, ul) {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
:is(ul, ol).compact, .ulCompact, .olCompact {
  line-height: 1;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
  clear: left;
  --indent: 3ch;
  /* --indent: attr(indent ch); not supported in any browser, but we can dream */
}
dl.olPercent {
  --indent: 5ch;
}
dl > dt {
  float: left;
  margin-right: 2ch;
  min-width: 8ch;
}
dl.dlNewline > dt {
  float: none;
}
dl > dd {
  margin-bottom: .8em;
  margin-left: var(--indent) !important; /* stupid element overrides */
  min-height: 2ex;
}
dl.olPercent > dt {
  min-width: calc(var(--indent) - 2ch);
}
:is(dl.compact, .dlCompact) > dd {
  margin-bottom: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:first-child, .break:first-child + *) {
  margin-top: 0;
}
:is(dl.compact, .dlCompact) > dd > :is(:last-child) {
  margin-bottom: 0;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0;
}
:is(dd, span).break {
  display: none;
}

/* links */
a, a[href].selfRef:hover {
  text-decoration: none;
}
a[href] {
  color: var(--link-color);
}
a[href].selfRef, .iref + a[href].internal {
  color: var(--text-color);
}
a[href]:hover {
  text-decoration: underline;
}
a[href].selfRef:hover {
  background-color: var(--highlight-color);
}
a.xref:is(.cite, .auto), :is(#status-of-memo, #copyright) a {
  white-space: nowrap;
}

/* Figures */
tt, code, pre {
  background-color: var(--highlight-color);
  font: 14px/22px var(--font-mono);
}
tt, code {
  /* changing the font for inline elements leads to different ascender
     and descender heights; as we want to retain baseline alignment,
     remove leading to avoid altering the final height of lines
     note: this fails if these blocks take an entire line,
     a different solution would be great */
  line-height: 0;
}
:is(h1, h2, h3, h4, h5, h6) :is(tt, code) {
  font-size: 84%;
}
pre {
  border: 1px solid var(--line-color);
  font-size: 13.5px;
  line-height: 16px;
  letter-spacing: -0.2px;
  margin: 5px;
  padding: 5px;
}
img {
  max-width: 100%;
}
figure {
  margin: 0.5em 0;
  padding: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption, caption {
  font-style: italic;
  margin: 0.5em 1.5em;
  text-align: left;
}
@media screen {
  /* Auto-collapse boilerplate. */
  :is(#status-of-memo, #copyright) p {
    margin: -2px 0;
    max-height: 0;
    transition: max-height 2s ease, margin 0.5s ease 0.5s;
    overflow: hidden;
  }
  :is(#status-of-memo, #copyright):hover p,
  :is(#status-of-memo, #copyright) h2:target ~ p {
    margin: 0.5em 0;
    max-height: 500px;
    overflow: auto;
  }
  pre, svg {
    display: inline-block;
    overflow-x: auto;
  }
  pre {
    max-width: 100%;
    width: calc(100% - 22px - 1em);
  }
  svg {
    max-width: calc(100% - 22px - 1em);
  }
  figure pre {
    display: block;
    width: calc(100% - 25px);
  }
  :is(pre, svg) + .pilcrow {
    display: inline-block;
    vertical-align: text-bottom;
    padding-bottom: 8px;
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 0 2em;
  font-style: italic;
}
blockquote {
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  max-width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
}
table.right {
  margin-left: auto;
}
table.center {
  margin-left: auto;
  margin-right: auto;
}
table.left {
  margin-right: auto;
}
thead, tbody {
  border: 1px solid var(--line-color);
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 5px 10px;
}
th {
  background-color: var(--line-color);
}
:is(tr:nth-child(2n), thead+tbody > tr:nth-child(2n+1)) > td {
  background-color: var(--background-color);
}
:is(tr:nth-child(2n+1), thead+tbody > tr:nth-child(2n)) > td {
  background-color: var(--highlight-color);
}
table caption {
  margin: 0;
  padding: 3px 0 3px 1em;
}
table p {
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  margin-left: 3px;
  opacity: 0.2;
  user-select: none;
}
a.pilcrow[href] { color: var(--pilcrow-weak); }
a.pilcrow[href]:hover { text-decoration: none; }
@media not print {
  :hover > a.pilcrow {
    opacity: 1;
  }
  a.pilcrow[href]:hover {
    color: var(--pilcrow-strong);
    background-color: transparent;
  }
}
@media print {
  a.pilcrow {
    display: none;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid var(--line-color);
}
.bcp14 {
  font-variant: small-caps;
  font-weight: 600;
  font-size: var(--small-font-size);
}
.role {
  font-variant: all-small-caps;
}
sub, sup {
  line-height: 1;
  font-size: 80%;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: var(--small-font-size);
  line-height: 18px;
  --identifier-width: 15ch;
}
#identifiers dt {
  width: var(--identifier-width);
  min-width: var(--identifier-width);
  clear: left;
  float: left;
  text-align: right;
  margin-right: 1ch;
}
#identifiers dd {
  margin: 0;
  margin-left: calc(1em + var(--identifier-width)) !important;
  min-width: 5em;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #999;
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
#toc nav ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
#toc nav li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
#toc a.xref {
  white-space: normal;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 10ch;
  margin-right: 1.5ch;
}
.references dt:target::before {
  content: "⇒";
  width: 15px;
  margin: 0 10px 0 -25px;
}
.references dd {
  margin-left: 12ch !important;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
#rfc\.index\.index + ul {
  margin-left: 0;
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}
address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}
@media (min-width: 500px) {
  #authors-addresses > section {
    column-count: 2;
    column-gap: 20px;
  }
  #authors-addresses > section > h2 {
    column-span: all;
  }
  /* hack for break-inside: avoid-column */
  #authors-addresses address {
    display: inline-block;
    break-inside: avoid-column;
  }
}

.rfcEditorRemove p:first-of-type {
  font-style: italic;
}
.cref {
  background-color: rgba(249, 232, 105, 0.3);
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 929px) {
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    border-bottom: 1px solid #ccc;
    opacity: 0.6;
  }
  #toc.active {
      opacity: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 2px 0 2px 6px;
    padding-right: 1em;
    font-size: 18px;
    line-height: 24px;
    min-width: 190px;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 8px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    background-color: var(--background-color);
    padding: 0.5em 1em 1em;
    overflow: auto;
    overscroll-behavior: contain;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
  #toc.active nav {
    display: block;
  }
  /* Make the collapsed ToC header render white on gray also when it's a link */
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
  #toc a.toplink {
    margin-top: 2px;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 930px) {
  body {
    padding-right: 360px;
    padding-right: calc(min(180px + 20%, 500px));
  }
  #toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 480px);
    width: 312px;
    margin: 0;
    padding: 0;
    z-index: 1;
  }
  #toc h2 {
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 2em;
    overflow: auto;
    overscroll-behavior: contain;
    scrollbar-width: thin;
  }
  #toc nav > ul  {
    margin-bottom: 2em;
  }
  #toc ul {
    margin: 0 0 0 4px;
    font-size: var(--small-font-size);
  }
  #toc ul :is(p, li) {
    margin: 2px 0;
    line-height: 22px;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {
    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
}

/* Changes introduced to fix issues found during implementation */

/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}

/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin: 8px 0.5em 0;
}

/* Provide styling for table cell text alignment */
table .text-left {
  text-align: left;
}
table .text-center {
  text-align: center;
}
table .text-right {
  text-align: right;
}

/* Make the alternative author contact information look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 20em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Give the table caption label the same styling as the figcaption */

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  dd {
    page-break-before: avoid;
  }
  .vcard {
    page-break-inside: avoid;
  }

}

/* Dark mode. */
@media (prefers-color-scheme: dark) {
:root {
  --background-color: #121212;
  --text-color: #f0f0f0;
  --title-color: #fff;
  --link-color: #4da4f0;
  --highlight-color: #282828;
  --line-color: #444;
  --pilcrow-weak: #444;
  --pilcrow-strong: #666;
  scrollbar-color: #777 #333;
}
}

/* SVG Trick: a prefix match works because only black and white are allowed */
svg :is([stroke="black"], [stroke^="#000"]) {
  stroke: var(--text-color);
}
svg :is([stroke="white"], [stroke^="#fff"]) {
  stroke: var(--background-color);
}
svg :is([fill="black"], [fill^="#000"], :not([fill])) {
  fill: var(--text-color);
}
svg :is([fill="white"], [fill^="#fff"]) {
  fill: var(--background-color);
}
</style>

</head>
<body class="xml2rfc">
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">DAP Interoperation Test Design</td>
<td class="right">September 2023</td>
</tr></thead>
<tfoot><tr>
<td class="left">Cook</td>
<td class="center">Expires 21 March 2024</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Privacy Preserving Measurement</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-dcook-ppm-dap-interop-test-design-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2023-09-18" class="published">18 September 2023</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Informational</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2024-03-21">21 March 2024</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">D. Cook</div>
<div class="org">ISRG</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">DAP Interoperation Test Design</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document defines a common test interface for implementations of the
Distributed Aggregation Protocol for Privacy Preserving Measurement (DAP) and
describes how this test interface can be used to perform interoperation testing
between the implementations. Tests are orchestrated with containers, and new
test-only APIs are introduced to provision DAP tasks and initiate processing.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note rfcEditorRemove" id="section-note.1">
      <h2 id="name-about-this-document">
<a href="#name-about-this-document" class="section-name selfRef">About This Document</a>
      </h2>
<p id="section-note.1-1">This note is to be removed before publishing as an RFC.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">
        The latest revision of this draft can be found at <span><a href="https://divergentdave.github.io/draft-dcook-ppm-dap-interop-test-design/draft-dcook-ppm-dap-interop-test-design.html">https://divergentdave.github.io/draft-dcook-ppm-dap-interop-test-design/draft-dcook-ppm-dap-interop-test-design.html</a></span>.
        Status information for this document may be found at <span><a href="https://datatracker.ietf.org/doc/draft-dcook-ppm-dap-interop-test-design/">https://datatracker.ietf.org/doc/draft-dcook-ppm-dap-interop-test-design/</a></span>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">
        Discussion of this document takes place on the
        Privacy Preserving Measurement Working Group mailing list (<span><a href="mailto:ppm@ietf.org">mailto:ppm@ietf.org</a></span>),
        which is archived at <span><a href="https://mailarchive.ietf.org/arch/browse/ppm/">https://mailarchive.ietf.org/arch/browse/ppm/</a></span>.
        Subscribe at <span><a href="https://www.ietf.org/mailman/listinfo/ppm/">https://www.ietf.org/mailman/listinfo/ppm/</a></span>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
<p id="section-note.1-4">Source for this draft and an issue tracker can be found at
        <span><a href="https://github.com/divergentdave/draft-dcook-ppm-dap-interop-test-design">https://github.com/divergentdave/draft-dcook-ppm-dap-interop-test-design</a></span>.<a href="#section-note.1-4" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 21 March 2024.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2023 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-conventions-and-definitions" class="internal xref">Conventions and Definitions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1" class="keepWithNext"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-container-interface" class="internal xref">Container Interface</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-interoperation-test-api" class="internal xref">Interoperation Test API</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-common-structures" class="internal xref">Common Structures</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1.2.1">
                    <p id="section-toc.1-1.4.2.1.2.1.1"><a href="#section-4.1.1" class="auto internal xref">4.1.1</a>.  <a href="#name-vdaf" class="internal xref">VDAF</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1.2.2">
                    <p id="section-toc.1-1.4.2.1.2.2.1"><a href="#section-4.1.2" class="auto internal xref">4.1.2</a>.  <a href="#name-query" class="internal xref">Query</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-client" class="internal xref">Client</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a href="#section-4.2.1" class="auto internal xref">4.2.1</a>.  <a href="#name-internal-test-ready" class="internal xref"><code>/internal/test/ready</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.2">
                    <p id="section-toc.1-1.4.2.2.2.2.1"><a href="#section-4.2.2" class="auto internal xref">4.2.2</a>.  <a href="#name-internal-test-upload" class="internal xref"><code>/internal/test/upload</code></a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.  <a href="#name-aggregator-leader-or-helper" class="internal xref">Aggregator (Leader or Helper)</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.1">
                    <p id="section-toc.1-1.4.2.3.2.1.1"><a href="#section-4.3.1" class="auto internal xref">4.3.1</a>.  <a href="#name-internal-test-ready-2" class="internal xref"><code>/internal/test/ready</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.2">
                    <p id="section-toc.1-1.4.2.3.2.2.1"><a href="#section-4.3.2" class="auto internal xref">4.3.2</a>.  <a href="#name-internal-test-endpoint_for_" class="internal xref"><code>/internal/test/endpoint_for_task</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.3">
                    <p id="section-toc.1-1.4.2.3.2.3.1"><a href="#section-4.3.3" class="auto internal xref">4.3.3</a>.  <a href="#name-internal-test-add_task" class="internal xref"><code>/internal/test/add_task</code></a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="auto internal xref">4.4</a>.  <a href="#name-collector" class="internal xref">Collector</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4.2.1">
                    <p id="section-toc.1-1.4.2.4.2.1.1"><a href="#section-4.4.1" class="auto internal xref">4.4.1</a>.  <a href="#name-internal-test-ready-3" class="internal xref"><code>/internal/test/ready</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4.2.2">
                    <p id="section-toc.1-1.4.2.4.2.2.1"><a href="#section-4.4.2" class="auto internal xref">4.4.2</a>.  <a href="#name-internal-test-add_task-2" class="internal xref"><code>/internal/test/add_task</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4.2.3">
                    <p id="section-toc.1-1.4.2.4.2.3.1"><a href="#section-4.4.3" class="auto internal xref">4.4.3</a>.  <a href="#name-internal-test-collection_st" class="internal xref"><code>/internal/test/collection_start</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4.2.4">
                    <p id="section-toc.1-1.4.2.4.2.4.1"><a href="#section-4.4.4" class="auto internal xref">4.4.4</a>.  <a href="#name-internal-test-collection_po" class="internal xref"><code>/internal/test/collection_poll</code></a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5">
                <p id="section-toc.1-1.4.2.5.1"><a href="#section-4.5" class="auto internal xref">4.5</a>.  <a href="#name-test-cases" class="internal xref">Test Cases</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.6">
                <p id="section-toc.1-1.4.2.6.1"><a href="#section-4.6" class="auto internal xref">4.6</a>.  <a href="#name-other-test-considerations" class="internal xref">Other Test Considerations</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.7">
                <p id="section-toc.1-1.4.2.7.1"><a href="#section-4.7" class="auto internal xref">4.7</a>.  <a href="#name-test-runner-operation" class="internal xref">Test Runner Operation</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-implementation-status" class="internal xref">Implementation Status</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-references" class="internal xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-acknowledgments" class="internal xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-authors-address" class="internal xref">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">This document defines a common test interface for implementations of the
Distributed Aggregation Protocol for Privacy Preserving Measurement <span>[<a href="#DAP" class="cite xref">DAP</a>]</span>. This
test interface facilitates interoperation tests between different participating
DAP implementations. As DAP has four distinct protocol roles, (Client, Leader,
Helper, and Collector) manual interoperation testing between all combinations of
even a small number of DAP implementations could be taxing. The goal of this
document's common test interface is to enable automation of these interoperation
tests, so that different participating implementations can be exchanged for each
other, and the same test suite can be re-run on different combinations of
implementations. Simplifying interoperation testing will aid in identifying
errors in implementations, identifying ambiguities in the protocol
specification, and reducing regressions in implementations.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">Taking inspiration from QuicInteropRunner <span>[<a href="#SI2020" class="cite xref">SI2020</a>]</span>, each participating
implementation provides one or more container images adhering to a common
interface. A test runner will start one container for each protocol participant,
configure networking between the containers, and send various HTTP API requests.
As part of this common testing interface, the HTTP servers in the containers
will support some new test-only HTTP APIs, which will allow the test runner to
provision shared task parameters and secrets, as well as trigger the start of
different sub-protocols.<a href="#section-1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="conventions-and-definitions">
<section id="section-2">
      <h2 id="name-conventions-and-definitions">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-conventions-and-definitions" class="section-name selfRef">Conventions and Definitions</a>
      </h2>
<p id="section-2-1">The key words "<span class="bcp14">MUST</span>", "<span class="bcp14">MUST NOT</span>", "<span class="bcp14">REQUIRED</span>", "<span class="bcp14">SHALL</span>", "<span class="bcp14">SHALL NOT</span>", "<span class="bcp14">SHOULD</span>", "<span class="bcp14">SHOULD NOT</span>", "<span class="bcp14">RECOMMENDED</span>", "<span class="bcp14">NOT RECOMMENDED</span>",
"<span class="bcp14">MAY</span>", and "<span class="bcp14">OPTIONAL</span>" in this document are to be interpreted as
described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they
appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="container-interface">
<section id="section-3">
      <h2 id="name-container-interface">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-container-interface" class="section-name selfRef">Container Interface</a>
      </h2>
<p id="section-3-1">Each participating DAP implementation may provide one or more container images,
one for each protocol role it implements. (Client, Leader, Helper, and
Collector) A list of available container images will be maintained for each
role. Implementations may want to submit a single Aggregator image in both the
Leader list and Helper list. The test runner will fetch each container using the
given repository, image name, and tag.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">When the container's entry point executable is run, it <span class="bcp14">SHALL</span> start up an HTTP
server listening on port 8080. In all cases, the container will serve the
endpoints described in <a href="#test-api" class="auto internal xref">Section 4</a> (particularly, the subsection or
subsections appropriate to its protocol role). In the case of a Helper or
Leader container, it <span class="bcp14">SHALL</span> also serve the endpoints specified by <span>[<a href="#DAP" class="cite xref">DAP</a>]</span> on a
port (which <span class="bcp14">MAY</span> be the same port 8080 as used to serve the interoperation test
API) at some relative path. The container should run indefinitely, and the test
runner will terminate the container on completion of the test case. (While DAP
requires HTTPS connections, only using HTTP between containers simplifies test
setup. Putting TLS client/server interop out-of-scope for these tests is
acceptable, as it's not of interest.)<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">Log output <span class="bcp14">SHOULD</span> be captured into the directory "/logs" inside the container.
This will be copied out to the host for inspection on completion of the test
case.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">No environment variables or volume mounts will be provided to the containers.<a href="#section-3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="test-api">
<section id="section-4">
      <h2 id="name-interoperation-test-api">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-interoperation-test-api" class="section-name selfRef">Interoperation Test API</a>
      </h2>
<p id="section-4-1">Each container will have an HTTP server listening on port 8080 for commands from
the test runner. All requests <span class="bcp14">MUST</span> use the HTTP method POST. Requests and
responses for each endpoint listed below <span class="bcp14">SHALL</span> be encoded JSON objects
<span>[<a href="#RFC8729" class="cite xref">RFC8729</a>]</span>, with media type <code>application/json</code>. All binary blobs (i.e. task
IDs, batch IDs, HPKE configurations, and VDAF verification keys) <span class="bcp14">SHALL</span> be
encoded as strings with base64url <span>[<a href="#RFC4648" class="cite xref">RFC4648</a>]</span>, inside the JSON objects. Any
integer values in the parameters, measurement, or aggregate result of a <span>[<a href="#VDAF" class="cite xref">VDAF</a>]</span>
will be encoded as strings in base 10 instead of as numbers. This avoids
incompatibilities due to limitations on the range of JSON numbers that different
implementations can process.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">Each of these test APIs should return a status code of 200 OK if the command was
received, recognized, and parsed successfully, regardless of whether any
underlying DAP request succeeded or failed. The DAP-level success or failure
will be included in the test API response body. If a request is made to an
endpoint starting with "/internal/test/", but not listed here, a status code of
404 Not Found <span class="bcp14">SHOULD</span> be returned, to simplify the introduction of new test APIs.<a href="#section-4-2" class="pilcrow">¶</a></p>
<div id="common-structures">
<section id="section-4.1">
        <h3 id="name-common-structures">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-common-structures" class="section-name selfRef">Common Structures</a>
        </h3>
<div id="vdaf">
<section id="section-4.1.1">
          <h4 id="name-vdaf">
<a href="#section-4.1.1" class="section-number selfRef">4.1.1. </a><a href="#name-vdaf" class="section-name selfRef">VDAF</a>
          </h4>
<p id="section-4.1.1-1">In multiple APIs defined below, the test runner will send the name of a <span>[<a href="#VDAF" class="cite xref">VDAF</a>]</span>,
along with the parameters necessary to fully specify the VDAF. These will be
stored in a nested object, with the following attributes (new <code>type</code> values and
new keys will be added as new VDAFs are defined).<a href="#section-4.1.1-1" class="pilcrow">¶</a></p>
<span id="name-vdaf-json-object-structure"></span><div id="vdaf-object">
<table class="center" id="table-1">
            <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-vdaf-json-object-structure" class="selfRef">VDAF JSON object structure</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Key</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>type</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">One of <code>"Prio3Count"</code>, <code>"Prio3Histogram"</code>, <code>"Prio3Sum"</code>, <code>"Prio3SumVec"</code>, or <code>"Poplar1"</code>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>length</code> (only present if <code>type</code> is <code>"Prio3Histogram"</code> or <code>"Prio3SumVec"</code>)</td>
                <td class="text-left" rowspan="1" colspan="1">The length of the vectors being summed, encoded in base 10 as a string.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>chunk_length</code> (only present if <code>type</code> is <code>"Prio3Histogram"</code> or <code>"Prio3SumVec"</code>)</td>
                <td class="text-left" rowspan="1" colspan="1">This parameter is required by the parallel sum circuit optimization used in these VDAFs. It is a positive number encoded in base 10 as a string.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>bits</code> (only present if <code>type</code> is <code>"Prio3Sum"</code>, <code>"Prio3SumVec"</code>, or <code>"Poplar1"</code>)</td>
                <td class="text-left" rowspan="1" colspan="1">In the case of Prio3Sum or Prio3SumVec, the bit width of the integers being summed, encoded in base 10 as a string. In the case of Poplar1, the bit length of the input, encoded in base 10 as a string.</td>
              </tr>
            </tbody>
          </table>
</div>
</section>
</div>
<div id="query">
<section id="section-4.1.2">
          <h4 id="name-query">
<a href="#section-4.1.2" class="section-number selfRef">4.1.2. </a><a href="#name-query" class="section-name selfRef">Query</a>
          </h4>
<p id="section-4.1.2-1">In multiple APIs defined below, the test runner will need to send a query type,
and in one API, it will need to send a query type along with the associated
query parameters.<a href="#section-4.1.2-1" class="pilcrow">¶</a></p>
<p id="section-4.1.2-2">Query types are represented in API requests as numbers, following the values of
the <code>QueryType</code> enum in <span>[<a href="#DAP" class="cite xref">DAP</a>]</span>.<a href="#section-4.1.2-2" class="pilcrow">¶</a></p>
<p id="section-4.1.2-3">Queries are represented in API requests as a nested object, with the following
attributes (new keys will be added as new query types are defined).<a href="#section-4.1.2-3" class="pilcrow">¶</a></p>
<span id="name-query-json-object-structure"></span><div id="query-object">
<table class="center" id="table-2">
            <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-query-json-object-structure" class="selfRef">Query JSON object structure</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Key</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>type</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">A number, representing a query type, as described above.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>batch_interval_start</code> (only present if <code>type</code> is 1, for time interval queries)</td>
                <td class="text-left" rowspan="1" colspan="1">The start of the batch interval, represented as a number equal to the number of seconds since the UNIX epoch.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>batch_interval_duration</code> (only present if <code>type</code> is 1, for time interval queries)</td>
                <td class="text-left" rowspan="1" colspan="1">The duration of the batch interval in seconds, as a number.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>subtype</code> (only present if <code>type</code> is 2, for fixed size queries)</td>
                <td class="text-left" rowspan="1" colspan="1">0 or 1, representing one of the values of the <code>FixedSizeQueryType</code> enum in <span>[<a href="#DAP" class="cite xref">DAP</a>]</span>.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>batch_id</code> (only present if <code>type</code> is 2, for fixed size queries, and <code>subtype</code> is 0, for "by batch ID" queries)</td>
                <td class="text-left" rowspan="1" colspan="1">A base64url-encoded DAP <code>BatchID</code>.</td>
              </tr>
            </tbody>
          </table>
</div>
</section>
</div>
</section>
</div>
<div id="client">
<section id="section-4.2">
        <h3 id="name-client">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-client" class="section-name selfRef">Client</a>
        </h3>
<div id="client-ready">
<section id="section-4.2.1">
          <h4 id="name-internal-test-ready">
<a href="#section-4.2.1" class="section-number selfRef">4.2.1. </a><a href="#name-internal-test-ready" class="section-name selfRef"><code>/internal/test/ready</code></a>
          </h4>
<p id="section-4.2.1-1">The test runner will POST an empty object (i.e. <code>{}</code>) to this endpoint to check
if the Client container is ready to serve requests. If it is ready, it <span class="bcp14">MUST</span>
return a status code of 200 OK.<a href="#section-4.2.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="upload">
<section id="section-4.2.2">
          <h4 id="name-internal-test-upload">
<a href="#section-4.2.2" class="section-number selfRef">4.2.2. </a><a href="#name-internal-test-upload" class="section-name selfRef"><code>/internal/test/upload</code></a>
          </h4>
<p id="section-4.2.2-1">Upon receipt of this command, the Client container will construct a DAP
report with the given configuration and measurement, and submit it. The Client
container will send its response to the test runner once report submission has
either succeeded or permanently failed.<a href="#section-4.2.2-1" class="pilcrow">¶</a></p>
<span id="name-request-json-object-structu"></span><table class="center" id="table-3">
            <caption>
<a href="#table-3" class="selfRef">Table 3</a>:
<a href="#name-request-json-object-structu" class="selfRef">Request JSON object structure</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Key</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>task_id</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">A base64url-encoded DAP <code>TaskId</code>.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>leader</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The Leader's endpoint URL.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>helper</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The Helper's endpoint URL.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>vdaf</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">An object, with the layout given in <a href="#vdaf-object" class="auto internal xref">Table 1</a>. This determines the VDAF to be used when constructing a report.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>measurement</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">If the VDAF's <code>type</code> is <code>"Prio3Count"</code>: <code>"0"</code> or <code>"1"</code>. If the VDAF's <code>type</code> is <code>"Prio3Sum"</code>: a string (representing an integer in base 10). If the VDAF's <code>type</code> is <code>"Prio3SumVec"</code>: an array of strings, each representing an integer in base 10. If the VDAF's <code>type</code> is <code>"Prio3Histogram"</code>: a string (representing an integer in base 10). If the VDAF's <code>type</code> is <code>"Poplar1"</code>: an array of Booleans.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>time</code> (optional)</td>
                <td class="text-left" rowspan="1" colspan="1">If present, this provides a substitute time value that should be used when constructing the report. If not present, the current system time should be used, as per normal. The time is represented as a number, with a value of the number of seconds since the UNIX epoch.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>time_precision</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">A number, providing the precision in seconds of report timestamps.</td>
              </tr>
            </tbody>
          </table>
<span id="name-response-json-object-struct"></span><table class="center" id="table-4">
            <caption>
<a href="#table-4" class="selfRef">Table 4</a>:
<a href="#name-response-json-object-struct" class="selfRef">Response JSON object structure</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Key</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>status</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>"success"</code> if the report was submitted to the Leader successfully, or <code>"error"</code> otherwise.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>error</code> (optional)</td>
                <td class="text-left" rowspan="1" colspan="1">An optional error message, to assist in troubleshooting. This will be included in the test runner logs.</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
</section>
</div>
<div id="aggregator-leader-or-helper">
<section id="section-4.3">
        <h3 id="name-aggregator-leader-or-helper">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-aggregator-leader-or-helper" class="section-name selfRef">Aggregator (Leader or Helper)</a>
        </h3>
<div id="aggregator-ready">
<section id="section-4.3.1">
          <h4 id="name-internal-test-ready-2">
<a href="#section-4.3.1" class="section-number selfRef">4.3.1. </a><a href="#name-internal-test-ready-2" class="section-name selfRef"><code>/internal/test/ready</code></a>
          </h4>
<p id="section-4.3.1-1">The test runner will POST an empty object (i.e. <code>{}</code>) to this endpoint to check
if the Aggregator container is ready to serve requests. If it is ready, it <span class="bcp14">MUST</span>
return a status code of 200 OK.<a href="#section-4.3.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="endpoint-for-task">
<section id="section-4.3.2">
          <h4 id="name-internal-test-endpoint_for_">
<a href="#section-4.3.2" class="section-number selfRef">4.3.2. </a><a href="#name-internal-test-endpoint_for_" class="section-name selfRef"><code>/internal/test/endpoint_for_task</code></a>
          </h4>
<p id="section-4.3.2-1">Request the base URL for DAP endpoints for a new task. This API will be invoked
immediately before <code>/internal/test/add_task</code> (see <a href="#aggregator-add-task" class="auto internal xref">Section 4.3.3</a>), to
determine the endpoint URLs of the Aggregators. If the Aggregator uses a common
set of DAP endpoints for all tasks, it could always return the same value, such
as the relative URL <code>/</code>. Alternately, implementations may wish to generate new
endpoints for each task, derive the endpoint based on the <code>TaskId</code>, etc.<a href="#section-4.3.2-1" class="pilcrow">¶</a></p>
<p id="section-4.3.2-2">The test runner will provide the hostname at which the Aggregator is externally
reachable. If the Aggregator returns a relative URL, the test runner will
combine it with the hostname into an absolute URL, assuming that the port is
8080. Otherwise, the Aggregator can incorporate the hostname into an absolute
URL and return that.<a href="#section-4.3.2-2" class="pilcrow">¶</a></p>
<span id="name-request-json-object-structur"></span><table class="center" id="table-5">
            <caption>
<a href="#table-5" class="selfRef">Table 5</a>:
<a href="#name-request-json-object-structur" class="selfRef">Request JSON object structure</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Key</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>task_id</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">A base64url-encoded DAP <code>TaskId</code>.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>role</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">Either <code>"leader"</code> or <code>"helper"</code>.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>hostname</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">This Aggregator's hostname in the interoperation test environment. This may optionally be used in constructing the endpoint URL as an absolute URL.</td>
              </tr>
            </tbody>
          </table>
<span id="name-response-json-object-structu"></span><table class="center" id="table-6">
            <caption>
<a href="#table-6" class="selfRef">Table 6</a>:
<a href="#name-response-json-object-structu" class="selfRef">Response JSON object structure</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Key</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>status</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>"success"</code> if the endpoint was successfully selected or set up, or <code>"error"</code> otherwise.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>error</code> (optional)</td>
                <td class="text-left" rowspan="1" colspan="1">An optional error message, to assist in troubleshooting. This will be included in the test runner logs.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>endpoint</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">A relative or absolute URL, specifying the DAP Aggregator endpoint that should be used for this task. If the test runner receives a relative URL, it will transform it into an absolute URL before performing the next phase of task setup.</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="aggregator-add-task">
<section id="section-4.3.3">
          <h4 id="name-internal-test-add_task">
<a href="#section-4.3.3" class="section-number selfRef">4.3.3. </a><a href="#name-internal-test-add_task" class="section-name selfRef"><code>/internal/test/add_task</code></a>
          </h4>
<p id="section-4.3.3-1">Register a task with the Aggregator, with the given configuration and secrets.<a href="#section-4.3.3-1" class="pilcrow">¶</a></p>
<p id="section-4.3.3-2">At least one of the HPKE keypairs available for this task should use the
mandatory-to-implement algorithms in section 6 of <span>[<a href="#DAP" class="cite xref">DAP</a>]</span>, for broad
compatibility.<a href="#section-4.3.3-2" class="pilcrow">¶</a></p>
<span id="name-request-json-object-structure"></span><table class="center" id="table-7">
            <caption>
<a href="#table-7" class="selfRef">Table 7</a>:
<a href="#name-request-json-object-structure" class="selfRef">Request JSON object structure</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Key</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>task_id</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">A base64url-encoded DAP <code>TaskId</code>.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>leader</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The Leader's endpoint URL. The test runner will ensure this is an absolute URL.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>helper</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The Helper's endpoint URL. The test runner will ensure this is an absolute URL.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>vdaf</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">An object, with the layout given in <a href="#vdaf-object" class="auto internal xref">Table 1</a>. This determines the task's VDAF.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>leader_authentication_token</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The authentication token that is shared with the other Aggregator, as a string. This string <span class="bcp14">MUST</span> be safe for use as an HTTP header value. When the Leader sends HTTP requests to the Helper, it <span class="bcp14">MUST</span> include this value in a header named <code>DAP-Auth-Token</code>.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>collector_authentication_token</code> (only present if <code>role</code> is <code>"leader"</code>)</td>
                <td class="text-left" rowspan="1" colspan="1">The authentication token that is shared between the Leader and Collector, as a string. This string <span class="bcp14">MUST</span> be safe for use as an HTTP header value. When the Collector sends HTTP requests to the Leader, it <span class="bcp14">MUST</span> include this value in a header named <code>DAP-Auth-Token</code>.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>role</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">Either <code>"leader"</code> or <code>"helper"</code>.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>vdaf_verify_key</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The VDAF verification key shared by the two Aggregators, encoded with base64url.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>max_batch_query_count</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">A number, providing the maximum number of batches any report may be included in, and thus the number of aggregate results it may contribute to.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>query_type</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">A number, representing the task's query type, as described in <a href="#query" class="auto internal xref">Section 4.1.2</a>.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>min_batch_size</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">A number, providing the minimum number of reports that must be in a batch for it to be collected.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>max_batch_size</code> (only present if <code>query_type</code> is 2, for fixed size queries)</td>
                <td class="text-left" rowspan="1" colspan="1">A number, providing the maximum number of reports that may be in a batch for it to be collected.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>time_precision</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">A number, providing the precision in seconds of report timestamps. For tasks using the time interval query type, the batch interval's duration will always be a multiple of this value.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>collector_hpke_config</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The Collector's HPKE configuration, encoded in base64url, for encryption of aggregate shares.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>task_expiration</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">A number, providing the time when Clients are no longer expected to upload to this task. This is represented as a number of seconds since the UNIX epoch.</td>
              </tr>
            </tbody>
          </table>
<span id="name-response-json-object-structur"></span><table class="center" id="table-8">
            <caption>
<a href="#table-8" class="selfRef">Table 8</a>:
<a href="#name-response-json-object-structur" class="selfRef">Response JSON object structure</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Key</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>status</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>"success"</code> if the task was successfully set up, or <code>"error"</code> otherwise. (for example, if the VDAF was not supported)</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>error</code> (optional)</td>
                <td class="text-left" rowspan="1" colspan="1">An optional error message, to assist in troubleshooting. This will be included in the test runner logs.</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
</section>
</div>
<div id="collector">
<section id="section-4.4">
        <h3 id="name-collector">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-collector" class="section-name selfRef">Collector</a>
        </h3>
<div id="collector-ready">
<section id="section-4.4.1">
          <h4 id="name-internal-test-ready-3">
<a href="#section-4.4.1" class="section-number selfRef">4.4.1. </a><a href="#name-internal-test-ready-3" class="section-name selfRef"><code>/internal/test/ready</code></a>
          </h4>
<p id="section-4.4.1-1">The test runner will POST an empty object (i.e. <code>{}</code>) to this endpoint to check
if the Collector container is ready to serve requests. If it is ready, it <span class="bcp14">MUST</span>
return a status code of 200 OK.<a href="#section-4.4.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="collector-add-task">
<section id="section-4.4.2">
          <h4 id="name-internal-test-add_task-2">
<a href="#section-4.4.2" class="section-number selfRef">4.4.2. </a><a href="#name-internal-test-add_task-2" class="section-name selfRef"><code>/internal/test/add_task</code></a>
          </h4>
<p id="section-4.4.2-1">Register a task with the Collector, with the given configuration. Returns the
Collector's HPKE configuration for this task.<a href="#section-4.4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.4.2-2">The HPKE keypair generated for this task should use the mandatory-to-implement
algorithms in section 6 of <span>[<a href="#DAP" class="cite xref">DAP</a>]</span>, for broad compatibility.<a href="#section-4.4.2-2" class="pilcrow">¶</a></p>
<span id="name-request-json-object-structure-2"></span><table class="center" id="table-9">
            <caption>
<a href="#table-9" class="selfRef">Table 9</a>:
<a href="#name-request-json-object-structure-2" class="selfRef">Request JSON object structure</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Key</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>task_id</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">A base64url-encoded DAP <code>TaskId</code>.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>leader</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The Leader's endpoint URL.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>vdaf</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">An object, with the layout given in <a href="#vdaf-object" class="auto internal xref">Table 1</a>. This determines the task's VDAF.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>collector_authentication_token</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The authentication token that is shared between the Leader and Collector, as a string. This string <span class="bcp14">MUST</span> be safe for use as an HTTP header value. When the Collector sends HTTP requests to the Leader, it <span class="bcp14">MUST</span> include this value in a header named <code>DAP-Auth-Token</code>.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>query_type</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">A number, representing the task's query type, as described in <a href="#query" class="auto internal xref">Section 4.1.2</a>.</td>
              </tr>
            </tbody>
          </table>
<span id="name-response-json-object-structure"></span><table class="center" id="table-10">
            <caption>
<a href="#table-10" class="selfRef">Table 10</a>:
<a href="#name-response-json-object-structure" class="selfRef">Response JSON object structure</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Key</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>status</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>"success"</code> if the task was successfully set up, or <code>"error"</code> otherwise. (for example, if the VDAF was not supported)</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>error</code> (optional)</td>
                <td class="text-left" rowspan="1" colspan="1">An optional error message, to assist in troubleshooting. This will be included in the test runner logs.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>collector_hpke_config</code> (if successful)</td>
                <td class="text-left" rowspan="1" colspan="1">The Collector's HPKE configuration, encoded in base64url, for encryption of aggregate shares.</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="collection-start">
<section id="section-4.4.3">
          <h4 id="name-internal-test-collection_st">
<a href="#section-4.4.3" class="section-number selfRef">4.4.3. </a><a href="#name-internal-test-collection_st" class="section-name selfRef"><code>/internal/test/collection_start</code></a>
          </h4>
<p id="section-4.4.3-1">Send a collection request to the Leader with the provided parameters, and return
a handle to the test runner identifying this collection job. The test runner
will provide this handle to the Collector in subsequent
<code>/internal/test/collection_poll</code> requests (see <a href="#collection-poll" class="auto internal xref">Section 4.4.4</a>).<a href="#section-4.4.3-1" class="pilcrow">¶</a></p>
<span id="name-request-json-object-structure-3"></span><table class="center" id="table-11">
            <caption>
<a href="#table-11" class="selfRef">Table 11</a>:
<a href="#name-request-json-object-structure-3" class="selfRef">Request JSON object structure</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Key</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>task_id</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">A base64url-encoded DAP <code>TaskId</code>.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>agg_param</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">A base64url-encoded aggregation parameter.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>query</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">An object, with the layout given in <a href="#query-object" class="auto internal xref">Table 2</a>. This provides the collection job's query, and in turn determines which reports should be included.</td>
              </tr>
            </tbody>
          </table>
<span id="name-response-json-object-structure-2"></span><table class="center" id="table-12">
            <caption>
<a href="#table-12" class="selfRef">Table 12</a>:
<a href="#name-response-json-object-structure-2" class="selfRef">Response JSON object structure</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Key</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>status</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>"success"</code> if the collection request succeeded, or <code>"error"</code> otherwise.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>error</code> (optional)</td>
                <td class="text-left" rowspan="1" colspan="1">An optional error message, to assist in troubleshooting. This will be included in the test runner logs.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>handle</code> (if successful)</td>
                <td class="text-left" rowspan="1" colspan="1">A handle produced by the Collector to refer to this collection job. This must be a string.</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
<div id="collection-poll">
<section id="section-4.4.4">
          <h4 id="name-internal-test-collection_po">
<a href="#section-4.4.4" class="section-number selfRef">4.4.4. </a><a href="#name-internal-test-collection_po" class="section-name selfRef"><code>/internal/test/collection_poll</code></a>
          </h4>
<p id="section-4.4.4-1">The test runner sends this command to a Collector to poll for completion of the
collection job associated with the provided handle. The Collector provides the
status and (if available) results to the test runner.<a href="#section-4.4.4-1" class="pilcrow">¶</a></p>
<span id="name-request-json-object-structure-4"></span><table class="center" id="table-13">
            <caption>
<a href="#table-13" class="selfRef">Table 13</a>:
<a href="#name-request-json-object-structure-4" class="selfRef">Request JSON object structure</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Key</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>handle</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The handle for a collection job from a previous invocation of <code>/internal/test/collection_start</code>. (see <a href="#collection-start" class="auto internal xref">Section 4.4.3</a>)</td>
              </tr>
            </tbody>
          </table>
<span id="name-response-json-object-structure-3"></span><table class="center" id="table-14">
            <caption>
<a href="#table-14" class="selfRef">Table 14</a>:
<a href="#name-response-json-object-structure-3" class="selfRef">Response JSON object structure</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Key</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>status</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">Either <code>"complete"</code> if the result is ready, <code>"in progress"</code> if the result is not yet ready, or <code>"error"</code> if an error occurred.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>error</code> (optional)</td>
                <td class="text-left" rowspan="1" colspan="1">An optional error message, to assist in troubleshooting. This will be included in the test runner logs.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>batch_id</code> (if the task uses fixed size queries)</td>
                <td class="text-left" rowspan="1" colspan="1">The identifier of the batch that was collected, encoded with base64url.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>report_count</code> (if complete)</td>
                <td class="text-left" rowspan="1" colspan="1">A number, reflecting the count of Client reports included in this aggregated result.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>interval_start</code> (if complete)</td>
                <td class="text-left" rowspan="1" colspan="1">The start of the collection's interval, represented as a number equal to the number of seconds since the UNIX epoch.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>interval_duration</code> (if complete)</td>
                <td class="text-left" rowspan="1" colspan="1">The duration of the collection's interval in seconds, as a number.</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>result</code> (if complete)</td>
                <td class="text-left" rowspan="1" colspan="1">The result of the aggregation. If the VDAF is of type Prio3Count or Prio3Sum, this will be a string, representing an integer in base 10. If the VDAF is of type Prio3Histogram, Prio3SumVec, or Poplar1, this will be an array of strings, each representing an integer in base 10.</td>
              </tr>
            </tbody>
          </table>
</section>
</div>
</section>
</div>
<div id="test-cases">
<section id="section-4.5">
        <h3 id="name-test-cases">
<a href="#section-4.5" class="section-number selfRef">4.5. </a><a href="#name-test-cases" class="section-name selfRef">Test Cases</a>
        </h3>
<p id="section-4.5-1">Test cases could be written to cover the following scenarios.<a href="#section-4.5-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.5-2.1">Test successful aggregations with each VDAF.<a href="#section-4.5-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.5-2.2">Test an aggregation over a few hundred or thousand reports, to exercise the
Aggregators' division of reports into aggregation jobs.<a href="#section-4.5-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.5-2.3">Test that uploading a report with a time far in the future is rejected.<a href="#section-4.5-2.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.5-2.4">Confirm that Leaders and Helpers reject requests with respective
authentication tokens that are incorrect.<a href="#section-4.5-2.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.5-2.5">Test enforcement of <code>max_batch_query_count</code> by making overlapping collection
requests.<a href="#section-4.5-2.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.5-2.6">Perform an entire aggregation and collection flow, attempt to upload a late
report that falls into the same batch interval, and test that performing the
collection request a second time yields the same result.<a href="#section-4.5-2.6" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.5-2.7">Attempt to upload a canned report from the test runner more than once, and
confirm that anti-replay measures were effective by inspecting the aggregation
result.<a href="#section-4.5-2.7" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="other-test-considerations">
<section id="section-4.6">
        <h3 id="name-other-test-considerations">
<a href="#section-4.6" class="section-number selfRef">4.6. </a><a href="#name-other-test-considerations" class="section-name selfRef">Other Test Considerations</a>
        </h3>
<p id="section-4.6-1">All test cases should automatically fail after a generous timeout.<a href="#section-4.6-1" class="pilcrow">¶</a></p>
<p id="section-4.6-2">It is the responsibility of the test runner to wait for all containers to start
up and respond successfully to a request to <code>/internal/test/ready</code> before
sending any further commands.<a href="#section-4.6-2" class="pilcrow">¶</a></p>
<p id="section-4.6-3">Aggregator URLs will be constructed by the test runner with hostnames that
resolve to the respective containers within the container network.<a href="#section-4.6-3" class="pilcrow">¶</a></p>
<p id="section-4.6-4">A reverse proxy could be introduced in front of each Aggregator to inject
failures when sending requests or responses, to test round skew recovery
stragegies and overall implementation resilience.<a href="#section-4.6-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="test-runner-operation">
<section id="section-4.7">
        <h3 id="name-test-runner-operation">
<a href="#section-4.7" class="section-number selfRef">4.7. </a><a href="#name-test-runner-operation" class="section-name selfRef">Test Runner Operation</a>
        </h3>
<p id="section-4.7-1">The following sequence outlines how the test runner will use the above APIs on
port 8080 of each container to perform a typical integration test, executing a
successful aggregation.<a href="#section-4.7-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.7-2">
<li id="section-4.7-2.1">Create and start containers.<a href="#section-4.7-2.1" class="pilcrow">¶</a>
</li>
          <li id="section-4.7-2.2">Set up networking between containers.<a href="#section-4.7-2.2" class="pilcrow">¶</a>
</li>
          <li id="section-4.7-2.3">Try sending <code>/internal/test/ready</code> requests to each container, and retry
until they succeed.<a href="#section-4.7-2.3" class="pilcrow">¶</a>
</li>
          <li id="section-4.7-2.4">Generate a random <code>TaskId</code>, random authentication tokens, and a VDAF
verification key.<a href="#section-4.7-2.4" class="pilcrow">¶</a>
</li>
          <li id="section-4.7-2.5">Send a <code>/internal/test/endpoint_for_task</code> request (<a href="#endpoint-for-task" class="auto internal xref">Section 4.3.2</a>) to
the Leader.<a href="#section-4.7-2.5" class="pilcrow">¶</a>
</li>
          <li id="section-4.7-2.6">Send a <code>/internal/test/endpoint_for_task</code> request (<a href="#endpoint-for-task" class="auto internal xref">Section 4.3.2</a>) to
the Helper.<a href="#section-4.7-2.6" class="pilcrow">¶</a>
</li>
          <li id="section-4.7-2.7">Construct Aggregator URLs using the above responses.<a href="#section-4.7-2.7" class="pilcrow">¶</a>
</li>
          <li id="section-4.7-2.8">Send a <code>/internal/test/add_task</code> request (<a href="#collector-add-task" class="auto internal xref">Section 4.4.2</a>) to the
Collector. (the Collector generates an HPKE key pair as a side-effect)<a href="#section-4.7-2.8" class="pilcrow">¶</a>
</li>
          <li id="section-4.7-2.9">Send a <code>/internal/test/add_task</code> request (<a href="#aggregator-add-task" class="auto internal xref">Section 4.3.3</a>) to the
Leader.<a href="#section-4.7-2.9" class="pilcrow">¶</a>
</li>
          <li id="section-4.7-2.10">Send a <code>/internal/test/add_task</code> request (<a href="#aggregator-add-task" class="auto internal xref">Section 4.3.3</a>) to the
Helper.<a href="#section-4.7-2.10" class="pilcrow">¶</a>
</li>
          <li id="section-4.7-2.11">Send one or more <code>/internal/test/upload</code> requests (<a href="#upload" class="auto internal xref">Section 4.2.2</a>) to the Client.<a href="#section-4.7-2.11" class="pilcrow">¶</a>
</li>
          <li id="section-4.7-2.12">Send one or more <code>/internal/test/collection_start</code> requests
(<a href="#collection-start" class="auto internal xref">Section 4.4.3</a>) to the Collector. (this provides a handle for use in
the next step)<a href="#section-4.7-2.12" class="pilcrow">¶</a>
</li>
          <li id="section-4.7-2.13">Send <code>/internal/test/collection_poll</code> requests (<a href="#collection-poll" class="auto internal xref">Section 4.4.4</a>) to the
Collector, polling until each collection is completed. (the Collector will
provide the calculated aggregate results)<a href="#section-4.7-2.13" class="pilcrow">¶</a>
</li>
          <li id="section-4.7-2.14">Stop containers.<a href="#section-4.7-2.14" class="pilcrow">¶</a>
</li>
          <li id="section-4.7-2.15">Copy logs out of each container.<a href="#section-4.7-2.15" class="pilcrow">¶</a>
</li>
          <li id="section-4.7-2.16">Delete containers, and clean up container networking resources.<a href="#section-4.7-2.16" class="pilcrow">¶</a>
</li>
        </ol>
</section>
</div>
</section>
</div>
<div id="implementation-status">
<section id="section-5">
      <h2 id="name-implementation-status">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-implementation-status" class="section-name selfRef">Implementation Status</a>
      </h2>
<p id="section-5-1"><span>[<a href="#Janus" class="cite xref">Janus</a>]</span>, <span>[<a href="#divviup-ts" class="cite xref">divviup-ts</a>]</span>, and <span>[<a href="#Daphne" class="cite xref">Daphne</a>]</span> currently implement a version of this test
interface. <span>[<a href="#REF-IMPL" class="cite xref">REF-IMPL</a>]</span> is a reference implementation of a test runner using this
interface.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">Additional DAP implementations would be warmly welcomed.<a href="#section-5-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-6">
      <h2 id="name-security-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-6-1">Any DAP implementation that adopts this testing interface should ensure that the
test-only APIs described herein are only present in software used for testing
purposes, and not in production systems.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-7">
      <h2 id="name-iana-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-7-1">This document has no IANA actions.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-8">
      <h2 id="name-references">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-8.1">
        <h3 id="name-normative-references">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="DAP">[DAP]</dt>
        <dd>
<span class="refAuthor">Geoghegan, T.</span>, <span class="refAuthor">Patton, C.</span>, <span class="refAuthor">Rescorla, E.</span>, and <span class="refAuthor">C. A. Wood</span>, <span class="refTitle">"Distributed Aggregation Protocol for Privacy Preserving Measurement"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-ppm-dap-07</span>, <time datetime="2023-09-14" class="refDate">14 September 2023</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-ppm-dap-07">https://datatracker.ietf.org/doc/html/draft-ietf-ppm-dap-07</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4648">[RFC4648]</dt>
        <dd>
<span class="refAuthor">Josefsson, S.</span>, <span class="refTitle">"The Base16, Base32, and Base64 Data Encodings"</span>, <span class="seriesInfo">RFC 4648</span>, <span class="seriesInfo">DOI 10.17487/RFC4648</span>, <time datetime="2006-10" class="refDate">October 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc4648">https://www.rfc-editor.org/rfc/rfc4648</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8174">https://www.rfc-editor.org/rfc/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8729">[RFC8729]</dt>
        <dd>
<span class="refAuthor">Housley, R., Ed.</span> and <span class="refAuthor">L. Daigle, Ed.</span>, <span class="refTitle">"The RFC Series and RFC Editor"</span>, <span class="seriesInfo">RFC 8729</span>, <span class="seriesInfo">DOI 10.17487/RFC8729</span>, <time datetime="2020-02" class="refDate">February 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8729">https://www.rfc-editor.org/rfc/rfc8729</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="VDAF">[VDAF]</dt>
      <dd>
<span class="refAuthor">Barnes, R.</span>, <span class="refAuthor">Cook, D.</span>, <span class="refAuthor">Patton, C.</span>, and <span class="refAuthor">P. Schoppmann</span>, <span class="refTitle">"Verifiable Distributed Aggregation Functions"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-irtf-cfrg-vdaf-07</span>, <time datetime="2023-08-31" class="refDate">31 August 2023</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-vdaf-07">https://datatracker.ietf.org/doc/html/draft-irtf-cfrg-vdaf-07</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-8.2">
        <h3 id="name-informative-references">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="Daphne">[Daphne]</dt>
        <dd>
<span class="refTitle">"Implementation of DAP"</span>, <time datetime="2022-12-15" class="refDate">15 December 2022</time>, <span>&lt;<a href="https://github.com/cloudflare/daphne">https://github.com/cloudflare/daphne</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="divviup-ts">[divviup-ts]</dt>
        <dd>
<span class="refTitle">"TypeScript client for https://divviup.org"</span>, <time datetime="2022-10-05" class="refDate">5 October 2022</time>, <span>&lt;<a href="https://github.com/divviup/divviup-ts">https://github.com/divviup/divviup-ts</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Janus">[Janus]</dt>
        <dd>
<span class="refTitle">"Experimental implementation of the DAP specification"</span>, <time datetime="2022-08-25" class="refDate">25 August 2022</time>, <span>&lt;<a href="https://github.com/divviup/janus">https://github.com/divviup/janus</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="REF-IMPL">[REF-IMPL]</dt>
        <dd>
<span class="refTitle">"Reference DAP interoperation test harness"</span>, <time datetime="2022-10-04" class="refDate">4 October 2022</time>, <span>&lt;<a href="https://github.com/divergentdave/dap-interop-test-runner">https://github.com/divergentdave/dap-interop-test-runner</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="SI2020">[SI2020]</dt>
      <dd>
<span class="refAuthor">Seemann, M.</span> and <span class="refAuthor">J. Iyengar</span>, <span class="refTitle">"Automating QUIC Interoperability Testing"</span>, <time datetime="2020-08-10" class="refDate">10 August 2020</time>, <span>&lt;<a href="https://research.protocol.ai/publications/automating-quic-interoperability-testing/seemann2020.pdf">https://research.protocol.ai/publications/automating-quic-interoperability-testing/seemann2020.pdf</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="acknowledgments">
<section id="appendix-A">
      <h2 id="name-acknowledgments">
<a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="appendix-A-1">Thanks to Brandon Pitman, Christopher Patton, and Tim Geoghegan for feedback and
contributions.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">David Cook</span></div>
<div dir="auto" class="left"><span class="org">ISRG</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:dcook@divviup.org" class="email">dcook@divviup.org</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
